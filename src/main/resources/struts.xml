<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
    <package name="fyqzDefaultPackage" extends="struts-default" abstract="true">
        <interceptors>
            <!--add by shihaiyang,用于校验登录的拦截器，未来可能用于校验权限-->
            <interceptor name="loginValidateInterceptor" class="com.fyqz.dc.intrercepter.LoginInterceptor"/>
            <!--add by shihaiyang,用于自动发送json响应的拦截器-->
            <interceptor name="jsonInterceptor" class="com.fyqz.dc.intrercepter.JsonSenderInterceptor"/>
            <!--add by shihaiyang,json出现异常时的拦截器-->
            <interceptor name="jsonExceptionInterceptor" class="com.fyqz.dc.intrercepter.JsonExceptionInterceptor"/>
            <!--add by shihaiyang,用于给web action的上下文赋值的拦截器-->
            <interceptor name="fyqzWebContext" class="com.fyqz.dc.intrercepter.FyqzWebContextInterceptor"/>
            <interceptor name="fyqzParams" class="com.fyqz.dc.intrercepter.FyqzParamsInterceptor"/>
            <interceptor name="fyqzTimer" class="com.fyqz.dc.intrercepter.FyqzTimerInterceptor"/>
            <interceptor name="fyqzLogger" class="com.fyqz.dc.intrercepter.FyqzLoggingInterceptor"/>
            <interceptor name="fyqzProductConfig" class="com.fyqz.dc.intrercepter.FyqzProductConfigInterceptor"/>
            <interceptor-stack name="fyqzStack">
                <interceptor-ref name="fyqzTimer">
                    <!--如果不记录到数据库，请使用false即可-->
                    <param name="logPerformanceToDb">true</param>
                </interceptor-ref>
                <interceptor-ref name="fyqzLogger"/>
                <!--defined by shihaiyang start -->
                <interceptor-ref name="loginValidateInterceptor"/>
                <interceptor-ref name="jsonInterceptor"/>
                <!--defined by shihaiyang end -->
                <!--The following is default stack-->
                <!--defined by shihaiyang start -->
                <!--<interceptor-ref name="exception"/>-->
                <interceptor-ref name="jsonExceptionInterceptor"/>
                <!--defined by shihaiyang end -->
                <interceptor-ref name="alias"/>
                <interceptor-ref name="servletConfig"/>
                <interceptor-ref name="i18n"/>
                <interceptor-ref name="prepare"/>
                <interceptor-ref name="chain"/>
                <interceptor-ref name="scopedModelDriven"/>
                <interceptor-ref name="modelDriven"/>
                <interceptor-ref name="fileUpload">
                    <param name="maximumSize">1073741824</param>
                    <param name="allowedTypes">*/*</param>
                </interceptor-ref>
                <interceptor-ref name="checkbox"/>
                <interceptor-ref name="multiselect"/>
                <interceptor-ref name="staticParams"/>
                <interceptor-ref name="actionMappingParams"/>
                <interceptor-ref name="params">
                    <param name="excludeParams">
                        dojo\..*,^struts\..*,^session\..*,^request\..*,^application\..*,^servlet(Request|Response)\..*,parameters\...*
                    </param>
                </interceptor-ref>
                <interceptor-ref name="conversionError"/>
                <interceptor-ref name="validation">
                    <param name="excludeMethods">input,back,cancel,browse</param>
                </interceptor-ref>
                <interceptor-ref name="workflow">
                    <param name="excludeMethods">input,back,cancel,browse</param>
                </interceptor-ref>
                <interceptor-ref name="debugging"/>

                <!--add by shihaiyang for the context purpose-->
                <interceptor-ref name="fyqzWebContext"/>
                <interceptor-ref name="fyqzParams"/>
                <interceptor-ref name="fyqzProductConfig"/>
                <!--The following is default stack end -->


            </interceptor-stack>
        </interceptors>
        <default-interceptor-ref name="fyqzStack"/>
        <global-results>
            <result name="timeout" type="redirectAction">
                <param name="actionName">err_show</param>
                <param name="namespace">/</param>
                <param name="errForm.errCode">-10</param>
            </result>
            <!--以下是方便debug-->
            <result name="exception">/common/err/exception.jsp</result>

        </global-results>
        <global-exception-mappings>
            <exception-mapping exception="java.lang.Exception" result="exception"/>
        </global-exception-mappings>
    </package>


    <constant name="struts.ognl.allowStaticMethodAccess" value="true"/>
    <package name="default" namespace="/" extends="fyqzDefaultPackage">
        <!-- 工作流的Action -->
        <action name="activiti_*" class="com.fyqz.dc.action.ActivitiAction" method="{1}">
				<result name="start">/WEB-INF/jsp/processTest.jsp</result>
				<result name="list">/WEB-INF/jsp/index.jsp</result>
        </action>
        <action name="forward_*" class="com.fyqz.dc.action.ForwardAction" method="{1}">
				<result name="toMain">/WEB-INF/jsp/index.jsp</result>
				<result name="toLogin">/WEB-INF/jsp/login.jsp</result>
				<result name="toDiscussNew">/WEB-INF/jsp/discuss_new.jsp</result>
				<result name="toDiscussList">/WEB-INF/jsp/discuss_check_list.jsp</result>
				<result name="toUserNew">/WEB-INF/jsp/user_new.jsp</result>
				<result name="toRoleNew">/WEB-INF/jsp/role_new.jsp</result>
				<result name="toPermissionNew">/WEB-INF/jsp/permission_new.jsp</result>
        </action>
        <action name="user_*" class="com.fyqz.dc.action.UserAction" method="{1}">
        	<result name="toUserManage">/WEB-INF/jsp/user_manage.jsp</result>
        	<result name="toModify">/WEB-INF/jsp/user_modify.jsp</result>
        	<result name="toRoleSetup">/WEB-INF/jsp/user_role_setup.jsp</result>
        </action>
        <action name="role_*" class="com.fyqz.dc.action.RoleAction" method="{1}">
        	<result name="toRoleManage">/WEB-INF/jsp/role_manage.jsp</result>
        	<result name="toModify">/WEB-INF/jsp/role_modify.jsp</result>
        	<result name="toPermissionSetup">/WEB-INF/jsp/role_permission_setup.jsp</result>
        </action>
        <action name="permission_*" class="com.fyqz.dc.action.PermissionAction" method="{1}">
        	<result name="toPermissionManage">/WEB-INF/jsp/permission_manage.jsp</result>
        	<result name="toModify">/WEB-INF/jsp/permission_modify.jsp</result>
        </action>
        <action name="discuss_*" class="com.fyqz.dc.action.DiscussAction" method="{1}">
        	<result name="toMain">/WEB-INF/jsp/index.jsp</result>
        	<result name="detail">/WEB-INF/jsp/discuss_check.jsp</result>
        	<result name="queryCheckDiscuss">/WEB-INF/jsp/discuss_check_list.jsp</result>
        </action>

        <!--一个用于处理各种错误的action add by shihaiyang start -->
        <action name="err_*" class="com.fyqz.dc.common.ErrAction" method="{1}">
			<result name="timeout">/common/err/timout.jsp</result>
            <result name="sysErr">/common/err/sysErr.jsp</result>
        </action>
        <!--一个用于处理各种错误的action add by shihaiyang end -->
        
    </package>
    <!--<include file="struts_mwc.xml"/>-->
    <include file="struts_linmy.xml"/>
</struts>  